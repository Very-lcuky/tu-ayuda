var select=document.querySelector("select[multiple]"),selectOptions=select.querySelectorAll("option"),newSelect=document.createElement("div");newSelect.classList.add("selectMultiple");var active=document.createElement("div");active.classList.add("active");var optionList=document.createElement("ul"),placeholder=select.dataset.placeholder,span=document.createElement("span");span.innerText=placeholder,active.appendChild(span),selectOptions.forEach(e=>{let t=e.innerText,l=document.createElement("li");if(l.dataset.value=e.value,l.innerHTML=t,e.selected){let l=document.createElement("a");l.dataset.value=e.value,l.innerHTML="<em>"+t+"</em><i></i>",active.appendChild(l),span.classList.add("hide")}else optionList.appendChild(l)});var arrow=document.createElement("div");function checkIfEmpty(){let e=document.querySelector(".selectMultiple ul");0===e.children.length?e.classList.add("empty"):e.classList.remove("empty")}arrow.classList.add("arrow"),active.appendChild(arrow),newSelect.appendChild(active),newSelect.appendChild(optionList),select.parentElement.append(newSelect),span.appendChild(select),document.querySelector(".selectMultiple ul").addEventListener("click",e=>{let t=e.target.closest("li");if(!t)return;let l=t.closest(".selectMultiple");if(!l.classList.contains("clicked")){l.classList.add("clicked"),t.classList.add("remove");let e=document.createElement("a");e.dataset.value=t.dataset.value,e.innerHTML="<em>"+t.innerText+"</em><i></i>",e.classList.add("notShown"),l.querySelector("div").appendChild(e),l.querySelector("select").querySelector('option[value="'+t.dataset.value+'"]').setAttribute("selected","selected"),setTimeout(()=>{e.classList.add("shown"),l.querySelector("span").classList.add("hide")},300),setTimeout(()=>{t.remove(),l.classList.remove("clicked"),checkIfEmpty()},300)}}),document.querySelector(".selectMultiple > div").addEventListener("click",e=>{let t=e.target.closest("a");if(!t)return;let l=t.closest(".selectMultiple"),c=l.querySelector("select");c.querySelector('option[value="'+t.dataset.value+'"]').removeAttribute("selected"),t.classList.add("remove"),setTimeout(()=>{let e=document.createElement("li");e.dataset.value=t.dataset.value,e.innerText=t.querySelector("em").innerText,l.querySelector("ul").appendChild(e),t.remove(),c.selectedOptions.length||l.querySelector("span").classList.remove("hide"),checkIfEmpty()},300)}),document.querySelectorAll(".selectMultiple > div .arrow, .selectMultiple > div span").forEach(e=>{e.addEventListener("click",()=>{e.closest(".selectMultiple").classList.toggle("open")})}),checkIfEmpty();